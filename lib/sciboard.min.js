(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.SciBoard = {}));
}(this, (function (exports) { 'use strict';

  function _typeof(obj) {
    "@babel/helpers - typeof";

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      _typeof = function (obj) {
        return typeof obj;
      };
    } else {
      _typeof = function (obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return _typeof(obj);
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
    if (staticProps) _defineProperties(Constructor, staticProps);
    return Constructor;
  }

  var Camera = /*#__PURE__*/function () {
    function Camera(t, s, i, h, e) {
      _classCallCheck(this, Camera);

      this.t = t, this.i = s, this.width = i, this.height = h, this.setScale(e);
    }

    _createClass(Camera, [{
      key: "h",
      value: function h() {
        var t = this.t - this.width / (2 * this.scale),
            s = this.i - this.height / (2 * this.scale);
        this.o = new AetherisCanvas.Rectangle(t, s, this.width / this.scale, this.height / this.scale);
      }
    }, {
      key: "setScale",
      value: function setScale(t) {
        this.scale = parseFloat(t), this.scale = isNaN(this.scale) ? 1 : this.scale, this.h();
      }
    }, {
      key: "l",
      value: function l(t, s) {
        this.t = parseFloat(t), this.i = parseFloat(s), this.h();
      }
    }, {
      key: "m",
      value: function m(t, s) {
        this.t += t, this.i += s, this.h();
      }
    }, {
      key: "u",
      value: function u(t) {
        return this.o.C(t.position);
      }
    }, {
      key: "p",
      value: function p(t) {
        return new AetherisCanvas.Point(this.width / 2 + (t.position.x - this.t) * this.scale, this.height / 2 + (t.position.y - this.i) * this.scale);
      }
    }, {
      key: "v",
      value: function v(t) {
        return new AetherisCanvas.Size(t.size.width * this.scale, t.size.height * this.scale);
      }
    }]);

    return Camera;
  }();

  var _default = /*#__PURE__*/function () {
    function _default(s) {
      _classCallCheck(this, _default);

      if (this.t = document.querySelector(s.element || "#canvas"), void 0 === this.t) throw "No valid canvas object selected.";
      this.t.onmousedown = this.i, this.t.onmousemove = function (s) {
        return s.h;
      }(this), this.t.onmouseup = function (s) {
        return s.o;
      }(this), this.t.onmouseout = function (s) {
        return s.v;
      }(this), this.l = s.units || "px";
      var t = s.scale || 1;
      var a, i, n, e;
      this.p = this.t.getContext("2d"), "object" == _typeof(s.top) && s.top.hasOwnProperty("x") && s.top.hasOwnProperty("y") ? (a = parseFloat(s.top.x), i = parseFloat(s.top.y)) : (a = 0, i = 0), "object" == _typeof(s.size) && s.size.hasOwnProperty("width") && s.size.hasOwnProperty("height") ? (n = parseFloat(s.size.width), e = parseFloat(s.size.height)) : (n = this.p.canvas.width, e = this.p.canvas.height), this.u = new AetherisCanvas.Camera(a, i, n, e, t), this.I = [], this.C = s.C || "#2020cc", this.M = !1, this.m = new AetherisCanvas.Point(0, 0), this.j = new AetherisCanvas.Dimension(10, this.l), this.A = !1, this.F = !1, this.O = 0, this.g = 0;
    }

    _createClass(_default, [{
      key: "G",
      value: function G(s) {
        s instanceof AetherisCanvas.Item && (this.I.push(s), this.D());
      }
    }, {
      key: "D",
      value: function D() {
        this.p.clearRect(0, 0, this.p.canvas.width, this.p.canvas.height);

        for (var s in this.I) {
          var t = this.I[s];
          this.u.N(t) && (console.log("Item is visible"), t.U(this.p, this.u));
        }
      }
    }, {
      key: "k",
      value: function k() {
        if (this.M = !this.M, this.M) {
          var s = this.t.getContext("2d");
          s.clearRect(0, 0, s.canvas.width, s.canvas.height), console.log(s.canvas.width.toString() + ", " + s.canvas.height.toString());

          for (var t = 0; t < 100; t += 10) {
            s.fillStyle = this.C, s.fillRect(t + 1, 10, 1, 1);
          }
        }
      }
    }, {
      key: "q",
      value: function q() {}
    }, {
      key: "B",
      value: function B() {
        this.u.setScale(this.u.scale + .25), this.D();
      }
    }, {
      key: "H",
      value: function H() {
        this.u.setScale(this.u.scale - .25), this.D();
      }
    }, {
      key: "J",
      value: function J(s, t) {
        for (var _s in this.I) {
          this.I[_s];
        }
      }
    }, {
      key: "i",
      value: function i(s) {
        canvas.O = parseInt(s.clientX), canvas.g = parseInt(s.clientY), canvas.F = canvas.J(canvas.O, canvas.g), canvas.A = !canvas.F;
      }
    }, {
      key: "o",
      value: function o(s) {
        parseInt(s.clientX), parseInt(s.clientY);
        !0 === canvas.F || (canvas.A = !1);
      }
    }, {
      key: "h",
      value: function h(s) {
        if (!0 === canvas.A) {
          var t = parseInt(s.clientX),
              a = parseInt(s.clientY);
          canvas.u.moveCamera(canvas.O - t, canvas.g - a), canvas.O = t, canvas.g = a, canvas.D();
        } else canvas.F;
      }
    }, {
      key: "v",
      value: function v(s) {
        parseInt(s.clientX), parseInt(s.clientY);
        !0 === canvas.F || (canvas.A = !1);
      }
    }]);

    return _default;
  }();

  var _default$1 = function _default(t, s) {
    _classCallCheck(this, _default);

    this.size = t, this.units = s;
  };

  var Item = /*#__PURE__*/function () {
    function Item(t, s, i, h, e, a) {
      _classCallCheck(this, Item);

      this.t = e || !1, this.position = new AetherisCanvas.Point(t, s), this.size = new AetherisCanvas.Size(i, h), this.i = a, this.children = [], this.parent = null;
    }

    _createClass(Item, [{
      key: "h",
      value: function h(t, s) {
        var i = s.o(this),
            h = s.l(this);
        this.t ? t.fillRect(i.x - h.width / 2, i.y - h.height / 2, h.width, h.height) : t.fillRect(i.x, i.y, h.width, h.height);

        for (var _i in this.children) {
          this.children[_i].h(t, s);
        }
      }
    }, {
      key: "m",
      value: function m(t, s, i) {
        if (!(i instanceof Item)) throw "Parameter child is not of class Item.";
        i.parent = this, i.position.x = t, i.position.y = s, this.children.push(i);
      }
    }, {
      key: "I",
      value: function I(t, s) {
        this.position.x += t, this.position.y += s;
      }
    }]);

    return Item;
  }();

  var _default$2 = /*#__PURE__*/function () {
    function _default(t, s) {
      _classCallCheck(this, _default);

      this.x = t, this.y = s;
    }

    _createClass(_default, [{
      key: "t",
      value: function t(_t) {
        return this.o(_t.x, _t.y);
      }
    }, {
      key: "o",
      value: function o(t, s) {
        var o = this.x - t,
            i = this.y - s;
        return Math.sqrt(o * o + i * i);
      }
    }]);

    return _default;
  }();

  var _default$3 = /*#__PURE__*/function () {
    function _default(t, s, i, h) {
      _classCallCheck(this, _default);

      this.x = t, this.y = s, this.width = i, this.height = h, this.t = t + i, this.i = s + h, this.h = (t + i) / 2, this.o = (s + h) / 2;
    }

    _createClass(_default, [{
      key: "l",
      value: function l(t) {
        dx = this.h - t.x, dy = this.o - t.y;
      }
    }, {
      key: "u",
      value: function u(t) {
        if (!Array.isArray(t) || 4 !== t.length) throw "Parameter points needs to be an array of exactly four items.";
        var s = Number.MAX_VALUE,
            i = -1;

        for (var h = 0; h < 4; h++) {
          t[h].P(this.h, this.o) < s && (s = t[h], i = h);
        }

        return t[i];
      }
    }, {
      key: "contains",
      value: function contains(t, s) {
        return console.log("bb = (" + this.x.toString() + "," + this.y.toString() + "," + this.t.toString() + "," + this.i.toString() + ")"), console.log("p = (" + t.toString() + "," + s.toString() + ")"), t >= this.x && s >= this.y && t <= this.t && s <= this.i;
      }
    }, {
      key: "m",
      value: function m(t) {
        return this.contains(t.x, t.y);
      }
    }]);

    return _default;
  }();

  var _default$4 = function _default(t, s) {
    _classCallCheck(this, _default);

    this.width = t, this.height = s;
  };

  exports.Camera = Camera;
  exports.Canvas = _default;
  exports.Dimension = _default$1;
  exports.Item = Item;
  exports.Point = _default$2;
  exports.Rectangle = _default$3;
  exports.Size = _default$4;

  Object.defineProperty(exports, '__esModule', { value: true });

})));
