{"version":3,"file":"sciboard.js.map","sources":["../src/camera.js","../src/canvas.js","../src/dimension.js","../src/item.js","../src/point.js","../src/rectangle.js","../src/size.js"],"sourcesContent":["export default class Camera {\n\n    constructor(centerX, centerY, width, height, scale) {\n        this.centerX = centerX;\n        this.centerY = centerY;\n        this.width = width;\n        this.height = height;\n        this.setScale(scale);\n    }\n\n    recalculateBoundingBox() {\n\n        // The origin, in the WCS, of the camera.\n        // The camera bounding box gets smaller the higher the zoom. Higher zooms\n        // translate into smaller visible areas, but objects get larger.\n        const worldX = (this.centerX - this.width / (2.0 * this.scale));\n        const worldY = (this.centerY - this.height / (2.0 * this.scale));\n\n        this.worldBoundingRect = new AetherisCanvas.Rectangle(\n            worldX, worldY, this.width / this.scale, this.height / this.scale);\n    }\n\n    setScale(scale) {\n        this.scale = parseFloat(scale);\n        this.scale = isNaN(this.scale) ? 1.0 : this.scale;\n        this.recalculateBoundingBox();\n    }\n\n    setCameraPosition(centerX, centerY) {\n        this.centerX = parseFloat(centerX);\n        this.centerY = parseFloat(centerY);\n        this.recalculateBoundingBox();\n    }\n\n    moveCamera(dx, dy) {\n        this.centerX += dx;\n        this.centerY += dy;\n        this.recalculateBoundingBox();\n    }\n\n    isItemVisible(item) {\n        // Item needs to fall into the camera region for it to be visible.\n        // Check whether item is within camera in the WCS.\n        return this.worldBoundingRect.containsPoint(item.position);\n    }\n\n    getLocalItemCoordinates(item) {\n        return new AetherisCanvas.Point(\n            (this.width / 2.0) + (item.position.x - this.centerX) * this.scale,\n            (this.height / 2.0) + (item.position.y - this.centerY) * this.scale);\n    }\n\n    getLocalItemSize(item) {\n        return new AetherisCanvas.Size(\n            item.size.width * this.scale,\n            item.size.height * this.scale);\n    }\n}","export default class {\n\n    constructor(options) {\n\n        this.canvasElement = document.querySelector(options.element || '#canvas');\n        if (this.canvasElement === undefined) {\n            throw 'No valid canvas object selected.';\n        }\n\n        this.canvasElement.onmousedown = (function(c) { return c.handleCanvasMouseDown; })(this);\n        this.canvasElement.onmousemove = (function(c) { return c.handleCanvasMouseMove; })(this);\n        this.canvasElement.onmouseup = (function(c) { return c.handleCanvasMouseUp; })(this);\n        this.canvasElement.onmouseout = (function(c) { return c.handleCanvasMouseOut; })(this);\n\n        this.defaultUnits = options.units || 'px';\n        const scale = options.scale || 1.0;\n\n        this.canvasContext = this.canvasElement.getContext('2d');\n\n        let center_x, center_y, width, height;\n        if (typeof options.top === 'object' &&\n            options.top.hasOwnProperty('x') &&\n            options.top.hasOwnProperty('y')) {\n\n            center_x = parseFloat(options.top.x);\n            center_y = parseFloat(options.top.y);\n        } else {\n            center_x = 0.0;\n            center_y = 0.0;\n        }\n\n        if (typeof options.size === 'object' &&\n            options.size.hasOwnProperty('width') &&\n            options.size.hasOwnProperty('height')) {\n\n            width = parseFloat(options.size.width);\n            height = parseFloat(options.size.height);\n        } else {\n            width = this.canvasContext.canvas.width;\n            height = this.canvasContext.canvas.height;\n        }\n\n        this.canvasCamera = new AetherisCanvas.Camera(center_x, center_y, width, height, scale);\n        this.canvasItems = [];\n\n        this.gridColor = options.gridColor || '#2020cc';\n        this.gridActive = false;\n        this.gridCenter = new AetherisCanvas.Point(0.0, 0.0);\n        this.gridDimensions = new AetherisCanvas.Dimension(10.0, this.defaultUnits);\n\n        this.draggingCanvas = false;\n        this.draggingObject = false;\n        this.startDragX = 0;\n        this.startDragY = 0;\n    }\n\n    addItem(item) {\n        if (item instanceof AetherisCanvas.Item) {\n            this.canvasItems.push(item);\n            this.redraw();\n        }\n    }\n\n    redraw() {\n        this.canvasContext.clearRect(\n            0, 0, this.canvasContext.canvas.width, this.canvasContext.canvas.height);\n        for (let key in this.canvasItems) {\n            const item = this.canvasItems[key];\n            if (this.canvasCamera.isItemVisible(item)) {\n                console.log('Item is visible');\n                item.draw(this.canvasContext, this.canvasCamera);\n            }\n        }\n    }\n\n    toggleGrid() {\n        this.gridActive = !this.gridActive;\n        if (this.gridActive) {            \n            const ctx = this.canvasElement.getContext('2d');\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            console.log(ctx.canvas.width.toString() + ', ' + ctx.canvas.height.toString());\n\n            for (let i = 0; i < 100; i += 10) {\n                ctx.fillStyle = this.gridColor;\n                ctx.fillRect(i + 1, 10, 1, 1);\n            }\n        }\n    }\n\n    drawGrid() {\n        // TODO: Draw grid.\n    }\n\n    zoomIn() {\n        this.canvasCamera.setScale(this.canvasCamera.scale + 0.25);\n        this.redraw();\n    }\n\n    zoomOut() {\n        this.canvasCamera.setScale(this.canvasCamera.scale - 0.25);\n        this.redraw();\n    }\n\n    isMouseOnObject(x, y) {\n        for (let key in this.canvasItems) {\n            const item = this.canvasItems[key];\n        }\n    }\n\n    handleCanvasMouseDown(e) {\n        canvas.startDragX = parseInt(e.clientX);\n        canvas.startDragY = parseInt(e.clientY);\n        canvas.draggingObject = canvas.isMouseOnObject(canvas.startDragX, canvas.startDragY);\n        canvas.draggingCanvas = !canvas.draggingObject;\n    }\n\n    handleCanvasMouseUp(e) {\n        const mouseX = parseInt(e.clientX);\n        const mouseY = parseInt(e.clientY);\n\n        if (canvas.draggingObject === true) {\n            // TODO: Drop object here.\n        } else {\n            canvas.draggingCanvas = false;\n        }\n    }\n\n    handleCanvasMouseMove(e) {\n        if (canvas.draggingCanvas === true) {\n            const mouseX = parseInt(e.clientX);\n            const mouseY = parseInt(e.clientY);\n            canvas.canvasCamera.moveCamera(canvas.startDragX - mouseX, canvas.startDragY - mouseY);\n            canvas.startDragX = mouseX;\n            canvas.startDragY = mouseY;\n\n            canvas.redraw();\n        } else if (canvas.draggingObject === true) {\n            // TODO: Update object position.\n        }\n    }\n\n    handleCanvasMouseOut(e) {\n\n        const mouseX = parseInt(e.clientX);\n        const mouseY = parseInt(e.clientY);\n\n        if (canvas.draggingObject === true) {\n            // TODO: Stop dragging object.\n        } else {\n            canvas.draggingCanvas = false;\n        }\n    }\n}\n","export default class {\n\n    constructor(size, units) {\n        this.size = size;\n        this.units = units;\n    }\n}","export default class Item {\n\n    constructor(x, y, width, height, centerObject, props) {\n\n        // Whether the x and y coordinates refer to the center of the object.\n        // If not, they refer to the top left corner of its bounding box.\n        this.centerObject = centerObject || false;\n\n        // The position of the item in the WCS.\n        this.position = new AetherisCanvas.Point(x, y);\n\n        // The size of the item.\n        this.size = new AetherisCanvas.Size(width, height);\n\n        // Custom properties attached to this item.\n        this.props = props;\n\n        // Children contained by this item. They all must be of type Item.\n        this.children = [];\n\n        // The item's parent, or null if it's a root item.\n        this.parent = null;\n    }\n\n    draw(ctx, camera) {\n        const destCoords = camera.getLocalItemCoordinates(this);\n        const destSize = camera.getLocalItemSize(this);\n\n        if (this.centerObject) {\n            ctx.fillRect(destCoords.x - destSize.width/2.0, destCoords.y - destSize.height/2.0, destSize.width, destSize.height);\n        } else {\n            ctx.fillRect(destCoords.x, destCoords.y, destSize.width, destSize.height);\n        }\n\n        for (let key in this.children) {\n            const item = this.children[key];\n            item.draw(ctx, camera);\n        }\n    }\n\n    addChild(x, y, child) {\n        if (child instanceof Item) {\n            // Update the child's position.\n            child.parent = this;\n            child.position.x = x;\n            child.position.y = y;\n            this.children.push(child);\n        } else {\n            throw 'Parameter child is not of class Item.';\n        }\n    }\n\n    moveItem(dx, dy) {\n        this.position.x += dx;\n        this.position.y += dy;\n    }\n}","export default class {\n    \n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    distanceToPoint(targetPoint) {\n        return this.distanceToCoords(targetPoint.x, targetPoint.y);\n    }\n\n    distanceToCoords(x, y) {\n        const dx = this.x - x;\n        const dy = this.y - y;\n        \n        return Math.sqrt(dx * dx + dy * dy);\n    }\n}\n","export default class {\n\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.bottomX = x + width;\n        this.bottomY = y + height;\n        this.centerX = (x + width) / 2.0;\n        this.centerY = (y + height) / 2.0;\n    }\n\n    distanceToPoint(point) {\n        dx = this.centerX - point.x;\n        dy = this.centerY - point.y;\n    }\n\n    closestGridPoint(points) {\n        if (!Array.isArray(points) || points.length !== 4) {\n            throw 'Parameter points needs to be an array of exactly four items.';\n        }\n\n        let minDistance = Number.MAX_VALUE;\n        let pointIndex = -1;\n\n        for (let i = 0; i < 4; i++) {\n            const distance = points[i].distanceToCoords(this.centerX, this.centerY);\n            if (distance < minDistance) {\n                minDistance = points[i];\n                pointIndex = i;\n            }\n        }\n\n        return points[pointIndex];\n    }\n\n    contains(x, y) {\n        console.log(\"bb = (\" + this.x.toString() + ',' + this.y.toString() + ',' + this.bottomX.toString() + ',' + this.bottomY.toString() + ')');\n        console.log('p = (' + x.toString() + ',' + y.toString() + ')');\n        return (x >= this.x && y >= this.y && x <= this.bottomX && y <= this.bottomY);\n    }\n\n    containsPoint(point) {\n        return this.contains(point.x, point.y);\n    }\n};\n","export default class {\n\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n}"],"names":["Camera","centerX","centerY","width","height","scale","setScale","worldX","worldY","worldBoundingRect","AetherisCanvas","Rectangle","parseFloat","isNaN","recalculateBoundingBox","dx","dy","item","containsPoint","position","Point","x","y","Size","size","options","canvasElement","document","querySelector","element","undefined","onmousedown","c","handleCanvasMouseDown","onmousemove","handleCanvasMouseMove","onmouseup","handleCanvasMouseUp","onmouseout","handleCanvasMouseOut","defaultUnits","units","canvasContext","getContext","center_x","center_y","top","hasOwnProperty","canvas","canvasCamera","canvasItems","gridColor","gridActive","gridCenter","gridDimensions","Dimension","draggingCanvas","draggingObject","startDragX","startDragY","Item","push","redraw","clearRect","key","isItemVisible","console","log","draw","ctx","toString","i","fillStyle","fillRect","e","parseInt","clientX","clientY","isMouseOnObject","mouseX","mouseY","moveCamera","centerObject","props","children","parent","camera","destCoords","getLocalItemCoordinates","destSize","getLocalItemSize","child","targetPoint","distanceToCoords","Math","sqrt","bottomX","bottomY","point","points","Array","isArray","length","minDistance","Number","MAX_VALUE","pointIndex","distance","contains"],"mappings":"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"}